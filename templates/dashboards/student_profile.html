{% extends 'dashboards/student_base.html' %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/student_profile.css' %}?v=1.0">
{% endblock %}

{% block content %}
<h1 class="welcome-title">My Profile</h1>

{% if messages %}
    <ul class="messages">
        {% for message in messages %}
            <li class="{{ message.tags }}">{{ message }}</li>
        {% endfor %}
    </ul>
{% endif %}

<div class="profile-layout">
    <!-- Left Side: Profile Details -->
    <div class="profile-card">
        <h2>Personal Information</h2>
        <form action="{% url 'student_profile' %}" method="post">
            {% csrf_token %}
            <input type="hidden" name="form_type" value="details">
            <div class="form-group">
                <label for="full_name">Full Name</label>
                <input type="text" id="full_name" name="full_name" value="{{ profile.full_name|default:'' }}" required>
            </div>
            <div class="form-group">
                <label for="student_id">Student ID</label>
                <input type="text" id="student_id" name="student_id" value="{{ profile.student_id|default:'' }}" disabled>
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" value="{{ profile.email|default:'' }}" disabled>
            </div>
            <div class="form-group">
                <label for="phone_number">Phone Number</label>
                <input type="text" id="phone_number" name="phone_number" value="{{ profile.phone_number|default:'' }}">
            </div>
            <div class="form-group">
                <label for="address">Address</label>
                <textarea id="address" name="address" rows="3">{{ profile.address|default:'' }}</textarea>
            </div>
            <button type="submit" class="btn btn-primary">Update Details</button>
        </form>
    </div>

    <!-- Right Side: Change Password -->
    <div class="profile-card">
        <h2>Change Password</h2>
        <form action="{% url 'student_profile' %}" method="post">
            {% csrf_token %}
            <input type="hidden" name="form_type" value="password">
            <div class="form-group">
                <label for="new_password1">New Password</label>
                <input type="password" id="new_password1" name="new_password1" required minlength="6">
            </div>
            <div class="form-group">
                <label for="new_password2">Confirm New Password</label>
                <input type="password" id="new_password2" name="new_password2" required minlength="6">
            </div>
            <button type="submit" class="btn btn-primary">Change Password</button>
        </form>
    </div>
</div>
{% endblock %}
